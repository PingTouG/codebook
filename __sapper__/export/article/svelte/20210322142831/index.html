<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=assets/styles/global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{},{page:{title:"Svelte中的动态渲染和事件绑定",slug:"svelte",time:"2021-03-22T14:30:46.000Z",author:"PingTouG",html:"\u003Ch2 id=\"动态渲染\"\u003E动态渲染\u003C\u002Fh2\u003E\n\u003Cp\u003E在\u003Ccode\u003ESvelte\u003C\u002Fcode\u003E中支持：\u003Ccode\u003E条件渲染(if)\u003C\u002Fcode\u003E、\u003Ccode\u003E列表渲染(each)\u003C\u002Fcode\u003E、\u003Ccode\u003E异步判断渲染(await)\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\n\u003Ch3 id=\"条件渲染if\"\u003E条件渲染(if)\u003C\u002Fh3\u003E\n\u003Cp\u003E在\u003Ccode\u003ESvelte\u003C\u002Fcode\u003E中使用条件渲染主要有以下几个方式：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Eif：\u003Ccode\u003E{#if 条件} ... {\u002Fif}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003Eif-else：\u003Ccode\u003E{#if 条件} ... {:else} ... {\u002Fif}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003Eif-else if：\u003Ccode\u003E{#if 条件} ... {:else if 条件} ... {\u002Fif}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fsvelte.dev\u002Frepl\u002F7408082a2be74214b71de24be656d315?version=3\"\u003E在线 REPL\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E role = \u003Cspan class=\"hljs-string\"\u003E&#x27;admin&#x27;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eselect\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ebind:value\u003C\u002Fspan\u003E=\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{role}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Evalue\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;normal&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E普通用户\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Evalue\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;admin&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E管理员\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Evalue\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;root&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E超级管理员\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eselect\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-tag\"\u003E{#\u003Cspan class=\"hljs-name\"\u003Eif\u003C\u002Fspan\u003E role === &#x27;normal&#x27;}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E普通用户\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{:else \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E role === &#x27;admin&#x27;}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E管理员\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{:else \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E role === &#x27;root&#x27;}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E超级管理员\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{:else}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E未知身份\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-tag\"\u003E{\u002F\u003Cspan class=\"hljs-name\"\u003Eif\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"列表渲染each\"\u003E列表渲染(each)\u003C\u002Fh3\u003E\n\u003Cp\u003E在\u003Ccode\u003ESvelte\u003C\u002Fcode\u003E中列表渲染通过\u003Ccode\u003E{#each 列表 as 列表元素,列表下标 (key)} ... {\u002Feach}\u003C\u002Fcode\u003E，支持\u003Ccode\u003E数组\u003C\u002Fcode\u003E或\u003Ccode\u003E类似数组的对象(有length属性)\u003C\u002Fcode\u003E,列表元素支持解构。其中，\u003Ccode\u003Ekey\u003C\u002Fcode\u003E是为了保证列表数据更新后视图渲染正确，一般需要具有唯一性。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fsvelte.dev\u002Frepl\u002F46bea9c9d7ad4725b10240ef9e7c1b42?version=3\"\u003E在线 REPL\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E books = [\n        \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{\u003Cspan class=\"hljs-built_in\"\u003E id\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E, text: \u003Cspan class=\"hljs-string\"\u003E&#x27;Javascript&#x27;\u003C\u002Fspan\u003E }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E,\n        \u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{\u003Cspan class=\"hljs-built_in\"\u003E id\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E, text: \u003Cspan class=\"hljs-string\"\u003E&#x27;Svelte&#x27;\u003C\u002Fspan\u003E }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E,\n        \u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{\u003Cspan class=\"hljs-built_in\"\u003E id\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E, text: \u003Cspan class=\"hljs-string\"\u003E&#x27;React&#x27;\u003C\u002Fspan\u003E }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E,\n        \u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{\u003Cspan class=\"hljs-built_in\"\u003E id\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E4\u003C\u002Fspan\u003E, text: \u003Cspan class=\"hljs-string\"\u003E&#x27;Vue&#x27;\u003C\u002Fspan\u003E }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E,\n    ]\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eul\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-comment\"\u003E&lt;!--\n        \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{#each books \u003Cspan class=\"hljs-keyword\"\u003Eas\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003Eitem\u003C\u002Fspan\u003E,index (\u003Cspan class=\"hljs-type\"\u003Eitem\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-built_in\"\u003E.id\u003C\u002Fspan\u003E)}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\n            \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-comment\"\u003E&lt;li&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{index + \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-comment\"\u003E. \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{\u003Cspan class=\"hljs-type\"\u003Eitem\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-type\"\u003Etext\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-comment\"\u003E&lt;\u002Fli&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\n        \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{\u002Feach}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\n    --&gt;\u003C\u002Fspan\u003E\n    \u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{#each books \u003Cspan class=\"hljs-keyword\"\u003Eas\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003E{id\u003C\u002Fspan\u003E,\u003Cspan class=\"hljs-type\"\u003Etext\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E,index (id)}\n        \u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eli\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{index + \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E. \u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{\u003Cspan class=\"hljs-type\"\u003Etext\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eli\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n    \u003C\u002Fspan\u003E\u003Cspan class=\"xquery\"\u003E{\u002Feach}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eul\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"异步判断渲染await\"\u003E异步判断渲染(await)\u003C\u002Fh3\u003E\n\u003Cp\u003E当列表需要请求中状态时，就可以用\u003Ccode\u003E异步判断渲染\u003C\u002Fcode\u003E，主要有以下几个方式。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E请求中、成功、错误：\u003Ccode\u003E{#await expression}...{:then data}...{:catch error}...{\u002Fawait}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E请求中、成功：\u003Ccode\u003E{#await expression}...{:then data}...{\u002Fawait}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E请求成功：\u003Ccode\u003E{#await expression then data}...{\u002Fawait}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E请求错误：\u003Ccode\u003E{#await expression catch error}...{\u002Fawait}\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fsvelte.dev\u002Frepl\u002F426d2afd6d6b47ffa2377d10f6536275?version=3.35.0\"\u003E在线 REPL\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E list = []\n\n    \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Emock\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{\n        return new Promise((resolve,reject) =&gt; {\n            const list = [\n                { id: 1, text: &#x27;Javascript&#x27; }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E,\n                \u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{ id: 2, text: &#x27;Svelte&#x27; }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E,\n                \u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{ id: 3, text: &#x27;React&#x27; }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E,\n                \u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{ id: 4, text: &#x27;Vue&#x27; }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"javascript\"\u003E,\n            ]\n\n            \u003Cspan class=\"hljs-built_in\"\u003EsetTimeout\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E()=&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{\n                resolve(list)\n\u002F\u002F                 reject()\n            }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"javascript\"\u003E,\u003Cspan class=\"hljs-number\"\u003E3000\u003C\u002Fspan\u003E)\n        })\n    }\n\n    \u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Einit\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{\n        const data = await mock()\n        list = data\n    }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"javascript\"\u003E\n\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E promise = init()\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-tag\"\u003E{#\u003Cspan class=\"hljs-name\"\u003Eawait\u003C\u002Fspan\u003E promise}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003Eloading...\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{:then}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eul\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n        \u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-tag\"\u003E{#\u003Cspan class=\"hljs-name\"\u003Eeach\u003C\u002Fspan\u003E list as {id,text}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E (id)}\n            \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eli\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{text}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eli\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n        \u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-tag\"\u003E{\u002F\u003Cspan class=\"hljs-name\"\u003Eeach\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eul\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{:catch}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E请求失败，请稍后重试\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Espan\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-tag\"\u003E{\u002F\u003Cspan class=\"hljs-name\"\u003Eawait\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\n\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E注意：如果不需要请求或失败后的数据可以省略为：\u003Ccode\u003E{:then data}\u003C\u002Fcode\u003E→\u003Ccode\u003E{:then}\u003C\u002Fcode\u003E、\u003Ccode\u003E{:catch error}\u003C\u002Fcode\u003E→\u003Ccode\u003E{:catch}\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch2 id=\"事件绑定\"\u003E事件绑定\u003C\u002Fh2\u003E\n\u003Ch3 id=\"dom-事件绑定\"\u003EDOM 事件绑定\u003C\u002Fh3\u003E\n\u003Cp\u003E在\u003Ccode\u003ESvelte\u003C\u002Fcode\u003E中使用\u003Ccode\u003Eon:\u003C\u002Fcode\u003E来绑定事件，支持\u003Ccode\u003Einline handlers(内联函数)\u003C\u002Fcode\u003E。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fsvelte.dev\u002Frepl\u002F27d894922eea42eb88b32678911f554a?version=3\"\u003E在线 REPL\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E count = \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E onClick = \u003Cspan class=\"hljs-function\"\u003E() =&gt;\u003C\u002Fspan\u003E count++\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-comment\"\u003E&lt;!-- 内联样式 --&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-comment\"\u003E&lt;!-- &lt;button on:click=\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{() =&gt; count++}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-comment\"\u003E&gt;点击了\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{count}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-comment\"\u003E次&lt;\u002Fbutton&gt; --&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:click\u003C\u002Fspan\u003E=\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{onClick}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&gt;\u003C\u002Fspan\u003E点击了\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{count}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E次\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003ESvelte\u003C\u002Fcode\u003E同时也提供了可以更改其行为的事件修饰符，用\u003Ccode\u003E|\u003C\u002Fcode\u003E使用，修饰符可以多个使用。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003EpreventDefault\u003C\u002Fcode\u003E：\u003Ccode\u003Eevent.preventDefault()\u003C\u002Fcode\u003E阻止默认事件\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EstopPropagation\u003C\u002Fcode\u003E：\u003Ccode\u003Eevent.stopPropagation()\u003C\u002Fcode\u003E阻止事件传递\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Epassive\u003C\u002Fcode\u003E：改善了触摸\u002F滚轮事件的滚动性能（Svelte 会在安全的地方自动添加滚动条）\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Enonpassive\u003C\u002Fcode\u003E：明确设置\u003Ccode\u003Epassive: false\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Ecapture\u003C\u002Fcode\u003E：将事件触发时机改为\u003Ccode\u003E捕获阶段\u003C\u002Fcode\u003E，默认为\u003Ccode\u003E冒泡阶段\u003C\u002Fcode\u003E。\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FLearn\u002FJavaScript\u002FBuilding_blocks\u002FEvents#event_bubbling_and_capture\"\u003EMDN Docs\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eonce\u003C\u002Fcode\u003E：只触发一次\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eself\u003C\u002Fcode\u003E：仅当\u003Ccode\u003Eevent.target\u003C\u002Fcode\u003E是元素本身时才会触发事件\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E count = \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E blockCount = \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E onClick = \u003Cspan class=\"hljs-function\"\u003E() =&gt;\u003C\u002Fspan\u003E count++\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E onBlockClick = \u003Cspan class=\"hljs-function\"\u003E() =&gt;\u003C\u002Fspan\u003E blockCount++\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;block&quot;\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:click\u003C\u002Fspan\u003E|\u003Cspan class=\"hljs-attr\"\u003Eself\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{onBlockClick}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    block被点击了{blockCount}次\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:click\u003C\u002Fspan\u003E|\u003Cspan class=\"hljs-attr\"\u003Eonce\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{onClick}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E点击了{count}次\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Estyle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"css\"\u003E\n    \u003Cspan class=\"hljs-selector-class\"\u003E.block\u003C\u002Fspan\u003E{\n        \u003Cspan class=\"hljs-attribute\"\u003Ebackground-color\u003C\u002Fspan\u003E: red;\n    }\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Estyle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"组件中传递事件\"\u003E组件中传递事件\u003C\u002Fh3\u003E\n\u003Cp\u003E如果想监听组件的事件，则需要在组件内容触发事件，可通过\u003Ccode\u003EcreateEventDispatcher\u003C\u002Fcode\u003E创建一个触发器来触发。\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E注意：通过\u003Ccode\u003EcreateEventDispatcher\u003C\u002Fcode\u003E触发的事件在回调中的参数是一个自定义事件对象\u003Ccode\u003ECustomEvent\u003C\u002Fcode\u003E，需要通过\u003Ccode\u003Ee.detail\u003C\u002Fcode\u003E来获取触发时传入的数据。\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fsvelte.dev\u002Frepl\u002Fb35de87bef9740b593984d0487c63ae7?version=3\"\u003E在线 REPL\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003ESelect.svelte\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{ createEventDispatcher }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"javascript\"\u003E \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&#x27;svelte&#x27;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E value\n\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E dispatch = createEventDispatcher()\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E onChange = \u003Cspan class=\"hljs-function\"\u003E() =&gt;\u003C\u002Fspan\u003E dispatch(\u003Cspan class=\"hljs-string\"\u003E&#x27;change&#x27;\u003C\u002Fspan\u003E,value)\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eselect\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ebind:value\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:blur\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:change\u003C\u002Fspan\u003E=\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{onChange}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eslot\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eselect\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003EApp.svelte\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E Select \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&#x27;.\u002FSelect.svelte&#x27;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E value = \u003Cspan class=\"hljs-string\"\u003E&#x27;1&#x27;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E onChange = \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Ee\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(e.detail)\n    }\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003ESelect\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ebind:value\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:change\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{onChange}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Evalue\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;1&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E选项1\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Evalue\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;2&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E选项2\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Evalue\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;3&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E选项3\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eoption\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003ESelect\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E组件事件不会冒泡，若需要监听某个深度嵌套的组件，则需要在中间组件做转发，若中间组件只是转发事件，不对事件传递的数据做处理，则可以通过\u003Ccode\u003Eon:事件名\u003C\u002Fcode\u003E直接转发(DOM 元素也适用)，无需通过\u003Ccode\u003EcreateEventDispatcher\u003C\u002Fcode\u003E来触发。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fsvelte.dev\u002Frepl\u002F8a5d783774dd4f5db9e88b3e144590b0?version=3\"\u003E在线 REPL\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003ELevel2.svelte\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{ createEventDispatcher }\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"javascript\"\u003E \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&#x27;svelte&#x27;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E dispatch = createEventDispatcher()\n\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E onClick = \u003Cspan class=\"hljs-function\"\u003E()=&gt;\u003C\u002Fspan\u003E dispatch(\u003Cspan class=\"hljs-string\"\u003E&#x27;click&#x27;\u003C\u002Fspan\u003E,\u003Cspan class=\"hljs-string\"\u003E&#x27;click&#x27;\u003C\u002Fspan\u003E)\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:click\u003C\u002Fspan\u003E=\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-template-variable\"\u003E{onClick}\u003C\u002Fspan\u003E\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eslot\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003ELevel1.svelte\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E { createEventDispatcher } \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&#x27;svelte&#x27;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E Level2 \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&#x27;.\u002FLevel2.svelte&#x27;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E dispatch = createEventDispatcher()\n\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E onClick = \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Ee\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E dispatch(\u003Cspan class=\"hljs-string\"\u003E&#x27;click&#x27;\u003C\u002Fspan\u003E,\u003Cspan class=\"hljs-string\"\u003E`\u003Cspan class=\"hljs-subst\"\u003E${e.detail}\u003C\u002Fspan\u003E Level1处理了`\u003C\u002Fspan\u003E)\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003ELevel2\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    Level1未做转发\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eslot\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003ELevel2\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003ELevel2\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:click\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{onClick}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    Level1处理\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eslot\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003ELevel2\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003ELevel2\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:click\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eslot\u003C\u002Fspan\u003E \u002F&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003ELevel2\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003EApp.svelte\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-svelte\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E Level1 \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&#x27;.\u002FLevel1.svelte&#x27;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E onClick = \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-params\"\u003Ee\u003C\u002Fspan\u003E =&gt;\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Econsole\u003C\u002Fspan\u003E.log(e.detail)\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003ELevel1\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eon:click\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E{onClick}\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E点击\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003ELevel1\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.63a8dc3b.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main","/client/client.63a8dc3b.js")}document.head.appendChild(s)</script> <link href=client/client-0cebe465.css rel=stylesheet><link href=client/_layout-8d114d53.css rel=stylesheet><link href=client/[...slug]-304e65e2.css rel=stylesheet> <title>Svelte中的动态渲染和事件绑定</title> <link href=/client/client.63a8dc3b.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-0cebe465.css rel=preload as=style><link href=/client/[...slug].b7d0d2f8.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/utils.302b01ae.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[...slug]-304e65e2.css rel=preload as=style></head> <body> <div id=sapper> <section class=svelte-r1sizb><header class=svelte-r1sizb><a href=./ ><img alt="code book logo" class="svelte-r1sizb logo" src=/assets/images/logo.png></a> <a href=https://github.com/PingTouG class="svelte-r1sizb github" target=_blank><i class="svelte-r1sizb icon-github iconfont"></i></a></header> <main><section><main class=svelte-he2wxq> <section class=md><h1 class=title>Svelte中的动态渲染和事件绑定</h1> <div class="svelte-13lkdwn info"><div class="svelte-13lkdwn author">作者：PingTouG</div> <div class=time>时间：2021-03-22 14:30:46</div></div> <div class=md-content><h2 id=动态渲染>动态渲染</h2> <p>在<code>Svelte</code>中支持：<code>条件渲染(if)</code>、<code>列表渲染(each)</code>、<code>异步判断渲染(await)</code>。</p> <h3 id=条件渲染if>条件渲染(if)</h3> <p>在<code>Svelte</code>中使用条件渲染主要有以下几个方式：</p> <ul> <li>if：<code>{#if 条件} ... {/if}</code></li> <li>if-else：<code>{#if 条件} ... {:else} ... {/if}</code></li> <li>if-else if：<code>{#if 条件} ... {:else if 条件} ... {/if}</code></li> </ul> <p><a href="https://svelte.dev/repl/7408082a2be74214b71de24be656d315?version=3">在线 REPL</a></p> <pre><code class=language-svelte><span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>let</span> role = <span class=hljs-string>'admin'</span>
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>select</span> <span class=hljs-attr>bind:value</span>=</span></span><span class=hljs-template-variable>{role}</span><span class=xml><span class=hljs-tag>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>option</span> <span class=hljs-attr>value</span>=<span class=hljs-string>"normal"</span>></span>普通用户<span class=hljs-tag>&lt;/<span class=hljs-name>option</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>option</span> <span class=hljs-attr>value</span>=<span class=hljs-string>"admin"</span>></span>管理员<span class=hljs-tag>&lt;/<span class=hljs-name>option</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>option</span> <span class=hljs-attr>value</span>=<span class=hljs-string>"root"</span>></span>超级管理员<span class=hljs-tag>&lt;/<span class=hljs-name>option</span>></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>select</span>></span>
</span><span class=hljs-template-tag>{#<span class=hljs-name>if</span> role === 'normal'}</span><span class=xml>
 <span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>普通用户<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
</span><span class=hljs-template-variable>{:else <span class=hljs-keyword>if</span> role === 'admin'}</span><span class=xml>
 <span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>管理员<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
</span><span class=hljs-template-variable>{:else <span class=hljs-keyword>if</span> role === 'root'}</span><span class=xml>
 <span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>超级管理员<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
</span><span class=hljs-template-variable>{:else}</span><span class=xml>
 <span class=hljs-tag>&lt;<span class=hljs-name>div</span>></span>未知身份<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
</span><span class=hljs-template-tag>{/<span class=hljs-name>if</span>}</span>
</code></pre> <h3 id=列表渲染each>列表渲染(each)</h3> <p>在<code>Svelte</code>中列表渲染通过<code>{#each 列表 as 列表元素,列表下标 (key)} ... {/each}</code>，支持<code>数组</code>或<code>类似数组的对象(有length属性)</code>,列表元素支持解构。其中，<code>key</code>是为了保证列表数据更新后视图渲染正确，一般需要具有唯一性。</p> <p><a href="https://svelte.dev/repl/46bea9c9d7ad4725b10240ef9e7c1b42?version=3">在线 REPL</a></p> <pre><code class=language-svelte><span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>const</span> books = [
        </span></span><span class=xquery>{<span class=hljs-built_in> id</span>: <span class=hljs-number>1</span>, text: <span class=hljs-string>'Javascript'</span> }</span><span class=xml>,
        </span><span class=xquery>{<span class=hljs-built_in> id</span>: <span class=hljs-number>2</span>, text: <span class=hljs-string>'Svelte'</span> }</span><span class=xml>,
        </span><span class=xquery>{<span class=hljs-built_in> id</span>: <span class=hljs-number>3</span>, text: <span class=hljs-string>'React'</span> }</span><span class=xml>,
        </span><span class=xquery>{<span class=hljs-built_in> id</span>: <span class=hljs-number>4</span>, text: <span class=hljs-string>'Vue'</span> }</span><span class=xml>,
    ]
<span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span></span>

<span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>ul</span>></span>
    <span class=hljs-comment>&lt;!--
        </span></span><span class=xquery>{#each books <span class=hljs-keyword>as</span> <span class=hljs-type>item</span>,index (<span class=hljs-type>item</span><span class=hljs-built_in>.id</span>)}</span><span class=xml><span class=hljs-comment>
            </span></span><span class=xml><span class=hljs-comment>&lt;li></span></span><span class=xquery>{index + <span class=hljs-number>1</span>}</span><span class=xml><span class=hljs-comment>. </span></span><span class=xquery>{<span class=hljs-type>item</span>.<span class=hljs-type>text</span>}</span><span class=xml><span class=hljs-comment>&lt;/li></span></span><span class=xml><span class=hljs-comment>
        </span></span><span class=xquery>{/each}</span><span class=xml><span class=hljs-comment>
    --></span>
    </span><span class=xquery>{#each books <span class=hljs-keyword>as</span> <span class=hljs-built_in>{id</span>,<span class=hljs-type>text</span>}</span><span class=xml>,index (id)}
        </span><span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>li</span>></span></span><span class=xquery>{index + <span class=hljs-number>1</span>}</span><span class=xml>. </span><span class=xquery>{<span class=hljs-type>text</span>}</span><span class=xml><span class=hljs-tag>&lt;/<span class=hljs-name>li</span>></span></span><span class=xml>
    </span><span class=xquery>{/each}</span><span class=xml>
<span class=hljs-tag>&lt;/<span class=hljs-name>ul</span>></span></span>
</code></pre> <h3 id=异步判断渲染await>异步判断渲染(await)</h3> <p>当列表需要请求中状态时，就可以用<code>异步判断渲染</code>，主要有以下几个方式。</p> <ul> <li>请求中、成功、错误：<code>{#await expression}...{:then data}...{:catch error}...{/await}</code></li> <li>请求中、成功：<code>{#await expression}...{:then data}...{/await}</code></li> <li>请求成功：<code>{#await expression then data}...{/await}</code></li> <li>请求错误：<code>{#await expression catch error}...{/await}</code></li> </ul> <p><a href="https://svelte.dev/repl/426d2afd6d6b47ffa2377d10f6536275?version=3.35.0">在线 REPL</a></p> <pre><code class=language-svelte><span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>let</span> list = []

    <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>mock</span>(<span class=hljs-params></span>)</span></span></span><span class=hljs-template-variable>{
        return new Promise((resolve,reject) => {
            const list = [
                { id: 1, text: 'Javascript' }</span><span class=xml>,
                </span><span class=hljs-template-variable>{ id: 2, text: 'Svelte' }</span><span class=xml>,
                </span><span class=hljs-template-variable>{ id: 3, text: 'React' }</span><span class=xml>,
                </span><span class=hljs-template-variable>{ id: 4, text: 'Vue' }</span><span class=xml><span class=javascript>,
            ]

            <span class=hljs-built_in>setTimeout</span>(<span class=hljs-function>()=></span></span></span><span class=hljs-template-variable>{
                resolve(list)
//                 reject()
            }</span><span class=xml><span class=javascript>,<span class=hljs-number>3000</span>)
        })
    }

    <span class=hljs-keyword>async</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>init</span>(<span class=hljs-params></span>)</span></span></span><span class=hljs-template-variable>{
        const data = await mock()
        list = data
    }</span><span class=xml><span class=javascript>

    <span class=hljs-keyword>let</span> promise = init()
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

</span><span class=hljs-template-tag>{#<span class=hljs-name>await</span> promise}</span><span class=xml>
    <span class=hljs-tag>&lt;<span class=hljs-name>span</span>></span>loading...<span class=hljs-tag>&lt;/<span class=hljs-name>span</span>></span>
</span><span class=hljs-template-variable>{:then}</span><span class=xml>
    <span class=hljs-tag>&lt;<span class=hljs-name>ul</span>></span>
        </span><span class=hljs-template-tag>{#<span class=hljs-name>each</span> list as {id,text}</span><span class=xml> (id)}
            <span class=hljs-tag>&lt;<span class=hljs-name>li</span>></span></span><span class=hljs-template-variable>{text}</span><span class=xml><span class=hljs-tag>&lt;/<span class=hljs-name>li</span>></span>
        </span><span class=hljs-template-tag>{/<span class=hljs-name>each</span>}</span><span class=xml>
    <span class=hljs-tag>&lt;/<span class=hljs-name>ul</span>></span>
</span><span class=hljs-template-variable>{:catch}</span><span class=xml>
    <span class=hljs-tag>&lt;<span class=hljs-name>span</span>></span>请求失败，请稍后重试<span class=hljs-tag>&lt;/<span class=hljs-name>span</span>></span>
</span><span class=hljs-template-tag>{/<span class=hljs-name>await</span>}</span><span class=xml>
</span>
</code></pre> <blockquote> <p>注意：如果不需要请求或失败后的数据可以省略为：<code>{:then data}</code>→<code>{:then}</code>、<code>{:catch error}</code>→<code>{:catch}</code></p> </blockquote> <h2 id=事件绑定>事件绑定</h2> <h3 id=dom-事件绑定>DOM 事件绑定</h3> <p>在<code>Svelte</code>中使用<code>on:</code>来绑定事件，支持<code>inline handlers(内联函数)</code>。</p> <p><a href="https://svelte.dev/repl/27d894922eea42eb88b32678911f554a?version=3">在线 REPL</a></p> <pre><code class=language-svelte><span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>let</span> count = <span class=hljs-number>0</span>
    <span class=hljs-keyword>const</span> onClick = <span class=hljs-function>() =></span> count++
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-comment>&lt;!-- 内联样式 --></span>
<span class=hljs-comment>&lt;!-- &lt;button on:click=</span></span><span class=hljs-template-variable>{() => count++}</span><span class=xml><span class=hljs-comment>>点击了</span></span><span class=hljs-template-variable>{count}</span><span class=xml><span class=hljs-comment>次&lt;/button> --></span>
<span class=hljs-tag>&lt;<span class=hljs-name>button</span> <span class=hljs-attr>on:click</span>=</span></span><span class=hljs-template-variable>{onClick}</span><span class=xml><span class=hljs-tag>></span>点击了</span><span class=hljs-template-variable>{count}</span><span class=xml>次<span class=hljs-tag>&lt;/<span class=hljs-name>button</span>></span></span>
</code></pre> <p><code>Svelte</code>同时也提供了可以更改其行为的事件修饰符，用<code>|</code>使用，修饰符可以多个使用。</p> <ul> <li><code>preventDefault</code>：<code>event.preventDefault()</code>阻止默认事件</li> <li><code>stopPropagation</code>：<code>event.stopPropagation()</code>阻止事件传递</li> <li><code>passive</code>：改善了触摸/滚轮事件的滚动性能（Svelte 会在安全的地方自动添加滚动条）</li> <li><code>nonpassive</code>：明确设置<code>passive: false</code></li> <li><code>capture</code>：将事件触发时机改为<code>捕获阶段</code>，默认为<code>冒泡阶段</code>。<a href=https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#event_bubbling_and_capture>MDN Docs</a></li> <li><code>once</code>：只触发一次</li> <li><code>self</code>：仅当<code>event.target</code>是元素本身时才会触发事件</li> </ul> <pre><code class=language-svelte><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>let</span> count = <span class=hljs-number>0</span>
    <span class=hljs-keyword>let</span> blockCount = <span class=hljs-number>0</span>
    <span class=hljs-keyword>const</span> onClick = <span class=hljs-function>() =></span> count++
    <span class=hljs-keyword>const</span> onBlockClick = <span class=hljs-function>() =></span> blockCount++
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"block"</span> <span class=hljs-attr>on:click</span>|<span class=hljs-attr>self</span>=<span class=hljs-string>{onBlockClick}</span>></span>
    block被点击了{blockCount}次
    <span class=hljs-tag>&lt;<span class=hljs-name>button</span> <span class=hljs-attr>on:click</span>|<span class=hljs-attr>once</span>=<span class=hljs-string>{onClick}</span>></span>点击了{count}次<span class=hljs-tag>&lt;/<span class=hljs-name>button</span>></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>style</span>></span><span class=css>
    <span class=hljs-selector-class>.block</span>{
        <span class=hljs-attribute>background-color</span>: red;
    }
</span><span class=hljs-tag>&lt;/<span class=hljs-name>style</span>></span>
</code></pre> <h3 id=组件中传递事件>组件中传递事件</h3> <p>如果想监听组件的事件，则需要在组件内容触发事件，可通过<code>createEventDispatcher</code>创建一个触发器来触发。</p> <blockquote> <p>注意：通过<code>createEventDispatcher</code>触发的事件在回调中的参数是一个自定义事件对象<code>CustomEvent</code>，需要通过<code>e.detail</code>来获取触发时传入的数据。</p> </blockquote> <p><a href="https://svelte.dev/repl/b35de87bef9740b593984d0487c63ae7?version=3">在线 REPL</a></p> <p><code>Select.svelte</code></p> <pre><code class=language-svelte><span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>import</span> </span></span><span class=hljs-template-variable>{ createEventDispatcher }</span><span class=xml><span class=javascript> <span class=hljs-keyword>from</span> <span class=hljs-string>'svelte'</span>

    <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> value

    <span class=hljs-keyword>const</span> dispatch = createEventDispatcher()
    <span class=hljs-keyword>const</span> onChange = <span class=hljs-function>() =></span> dispatch(<span class=hljs-string>'change'</span>,value)
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>select</span> <span class=hljs-attr>bind:value</span> <span class=hljs-attr>on:blur</span> <span class=hljs-attr>on:change</span>=</span></span><span class=hljs-template-variable>{onChange}</span><span class=xml><span class=hljs-tag>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>slot</span> /></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>select</span>></span></span>
</code></pre> <p><code>App.svelte</code></p> <pre><code class=language-svelte><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>import</span> Select <span class=hljs-keyword>from</span> <span class=hljs-string>'./Select.svelte'</span>
    <span class=hljs-keyword>let</span> value = <span class=hljs-string>'1'</span>

    <span class=hljs-keyword>const</span> onChange = <span class=hljs-function><span class=hljs-params>e</span> =></span> {
        <span class=hljs-built_in>console</span>.log(e.detail)
    }
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>Select</span> <span class=hljs-attr>bind:value</span> <span class=hljs-attr>on:change</span>=<span class=hljs-string>{onChange}</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>option</span> <span class=hljs-attr>value</span>=<span class=hljs-string>"1"</span>></span>选项1<span class=hljs-tag>&lt;/<span class=hljs-name>option</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>option</span> <span class=hljs-attr>value</span>=<span class=hljs-string>"2"</span>></span>选项2<span class=hljs-tag>&lt;/<span class=hljs-name>option</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>option</span> <span class=hljs-attr>value</span>=<span class=hljs-string>"3"</span>></span>选项3<span class=hljs-tag>&lt;/<span class=hljs-name>option</span>></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>Select</span>></span>
</code></pre> <p>组件事件不会冒泡，若需要监听某个深度嵌套的组件，则需要在中间组件做转发，若中间组件只是转发事件，不对事件传递的数据做处理，则可以通过<code>on:事件名</code>直接转发(DOM 元素也适用)，无需通过<code>createEventDispatcher</code>来触发。</p> <p><a href="https://svelte.dev/repl/8a5d783774dd4f5db9e88b3e144590b0?version=3">在线 REPL</a></p> <p><code>Level2.svelte</code></p> <pre><code class=language-svelte><span class=xml><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>import</span> </span></span><span class=hljs-template-variable>{ createEventDispatcher }</span><span class=xml><span class=javascript> <span class=hljs-keyword>from</span> <span class=hljs-string>'svelte'</span>

    <span class=hljs-keyword>const</span> dispatch = createEventDispatcher()

    <span class=hljs-keyword>const</span> onClick = <span class=hljs-function>()=></span> dispatch(<span class=hljs-string>'click'</span>,<span class=hljs-string>'click'</span>)
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>button</span> <span class=hljs-attr>on:click</span>=</span></span><span class=hljs-template-variable>{onClick}</span><span class=xml><span class=hljs-tag>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>slot</span> /></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>button</span>></span></span>
</code></pre> <p><code>Level1.svelte</code></p> <pre><code class=language-svelte><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>import</span> { createEventDispatcher } <span class=hljs-keyword>from</span> <span class=hljs-string>'svelte'</span>
    <span class=hljs-keyword>import</span> Level2 <span class=hljs-keyword>from</span> <span class=hljs-string>'./Level2.svelte'</span>

    <span class=hljs-keyword>const</span> dispatch = createEventDispatcher()

    <span class=hljs-keyword>const</span> onClick = <span class=hljs-function><span class=hljs-params>e</span> =></span> dispatch(<span class=hljs-string>'click'</span>,<span class=hljs-string>`<span class=hljs-subst>${e.detail}</span> Level1处理了`</span>)
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>Level2</span>></span>
    Level1未做转发
    <span class=hljs-tag>&lt;<span class=hljs-name>slot</span> /></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>Level2</span>></span>
<span class=hljs-tag>&lt;<span class=hljs-name>Level2</span> <span class=hljs-attr>on:click</span>=<span class=hljs-string>{onClick}</span>></span>
    Level1处理
    <span class=hljs-tag>&lt;<span class=hljs-name>slot</span> /></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>Level2</span>></span>
<span class=hljs-tag>&lt;<span class=hljs-name>Level2</span> <span class=hljs-attr>on:click</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>slot</span> /></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>Level2</span>></span>
</code></pre> <p><code>App.svelte</code></p> <pre><code class=language-svelte><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
    <span class=hljs-keyword>import</span> Level1 <span class=hljs-keyword>from</span> <span class=hljs-string>'./Level1.svelte'</span>

    <span class=hljs-keyword>const</span> onClick = <span class=hljs-function><span class=hljs-params>e</span> =></span> <span class=hljs-built_in>console</span>.log(e.detail)
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>Level1</span> <span class=hljs-attr>on:click</span>=<span class=hljs-string>{onClick}</span>></span>点击<span class=hljs-tag>&lt;/<span class=hljs-name>Level1</span>></span>
</code></pre> </div> </section></main> </section></main> </section></div> 